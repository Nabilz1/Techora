<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Techora - Login</title>
<style>
  * { margin:0; padding:0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
  body { background:#f9f9f9; color:#333; }
  header, footer { background:#222; color:#fff; padding:20px 0; text-align:center; }
  nav ul { display:flex; justify-content:center; list-style:none; flex-wrap:wrap; margin-top:10px; }
  nav ul li { margin:0 15px; }
  nav ul li a { color:#fff; text-decoration:none; font-weight:500; }
  nav ul li a:hover { color:#00bcd4; }
  section { padding:60px 20px; max-width: 400px; margin: auto; background:#fff; border-radius:10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  h2 { text-align:center; margin-bottom:20px; }
  label { display:block; margin-bottom:6px; font-weight:600; }
  input[type=text], input[type=password] {
    width: 100%; padding:10px; margin-bottom:15px; border:1px solid #ccc; border-radius:5px; font-size:1rem;
  }
  button {
    background:#00bcd4; border:none; color:#fff; padding:12px; width:100%; font-size:1.1rem; border-radius:5px; cursor:pointer;
  }
  button:hover { background:#007c91; }
  #error-msg { color:#f44336; margin-bottom:15px; text-align:center; }
</style>
</head>
<body>

<header>
  <h1>Techora</h1>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="cart.html" id="cart-link">ðŸ›’ Cart (<span id="cart-count">0</span>)</a></li>
      <li id="login-nav-item"><a href="login.html">Login</a></li>
      <li id="logout-nav-item" style="display:none;"><a href="#" id="logout-btn">Logout</a></li>
    </ul>
  </nav>
</header>

<section>
  <h2>Login</h2>
  <p id="error-msg"></p>
  <form id="login-form">
    <label for="username">Username</label>
    <input type="text" id="username" required autocomplete="username" />
    <label for="password">Password</label>
    <input type="password" id="password" required autocomplete="current-password" />
    <button type="submit">Log In</button>
  </form>
</section>

<footer>
  <p>&copy; 2025 Techora. All rights reserved.</p>
</footer>

<a href="cart.html" id="floating-cart">ðŸ›’ (<span id="floating-count">0</span>)</a>

<script>
  const loginForm = document.getElementById('login-form');
  const errorMsg = document.getElementById('error-msg');
  const cartCountSpan = document.getElementById('cart-count');
  const floatingCountSpan = document.getElementById('floating-count');
  const loginNavItem = document.getElementById('login-nav-item');
  const logoutNavItem = document.getElementById('logout-nav-item');
  const logoutBtn = document.getElementById('logout-btn');

  // Sample user data for demo (replace with real auth)
  const demoUser = { username: 'user', password: '1234' };

  // Update cart count display
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCountSpan.textContent = totalCount;
    floatingCountSpan.textContent = totalCount;
  }

  // Update login/logout nav links
  function updateLoginStatus() {
    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
    if (loggedInUser) {
      loginNavItem.style.display = 'none';
      logoutNavItem.style.display = 'inline-block';
    } else {
      loginNavItem.style.display = 'inline-block';
      logoutNavItem.style.display = 'none';
    }
  }

  // Handle login submit
  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    // Demo simple auth check
    if (username === demoUser.username && password === demoUser.password) {
      localStorage.setItem('loggedInUser', JSON.stringify({ username }));
      errorMsg.textContent = '';
      updateLoginStatus();
      alert('Login successful!');
      // Redirect to home or previous page
      window.location.href = 'index.html';
    } else {
      errorMsg.textContent = 'Invalid username or password.';
    }
  });

  // Handle logout
  logoutBtn.addEventListener('click', (e) => {
    e.preventDefault();
    localStorage.removeItem('loggedInUser');
    updateLoginStatus();
    alert('Logged out successfully.');
    window.location.href = 'index.html';
  });

  // Initial setup
  updateCartCount();
  updateLoginStatus();
</script>

</body>
</html>
