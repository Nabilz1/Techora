<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Techora - Item Details</title>
<style>
  * { margin:0; padding:0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
  body { background:#f9f9f9; color:#333; }
  header, footer { background:#222; color:#fff; padding:20px 0; text-align:center; }
  nav ul { display:flex; justify-content:center; list-style:none; flex-wrap:wrap; margin-top:10px; }
  nav ul li { margin:0 15px; }
  nav ul li a { color:#fff; text-decoration:none; font-weight:500; }
  nav ul li a:hover { color:#00bcd4; }
  section { padding:40px 20px; max-width:900px; margin:auto; }
  h1 { font-size:2rem; margin-bottom:10px; }
  .price { color:#0097a7; font-weight:bold; font-size:1.5rem; margin-bottom:20px; }
  .description { margin-bottom:30px; font-size:1.1rem; line-height:1.4; }
  .image-gallery { display:flex; flex-direction: column; align-items: center; }
  #main-image {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    margin-bottom: 15px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
  }
  .thumbnail-images {
    display: flex;
    gap: 10px;
  }
  .thumbnail-images img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
    transition: transform 0.3s;
  }
  .thumbnail-images img:hover {
    transform: scale(1.1);
    box-shadow: 0 0 8px #00bcd4;
  }
  button.add-to-cart {
    background:#00bcd4; border:none; color:#fff; padding:12px 25px; border-radius:8px; cursor:pointer; font-weight:bold; font-size:1.1rem;
    transition: background-color 0.3s;
  }
  button.add-to-cart:hover { background:#007c91; }
  #floating-cart {
    position: fixed; bottom: 20px; right: 20px; background:#00bcd4; color:#fff; padding:12px 18px; border-radius:50%; font-size:1.2rem; text-decoration:none; box-shadow:0 4px 10px rgba(0,0,0,0.2); z-index:1000;
  }
  #floating-cart:hover { background:#007c91; }
</style>
</head>
<body>
<header>
  <h1>Techora</h1>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="items.html">Items</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li id="user-area"><a href="login.html">Login</a></li>
      <li><a href="cart.html" id="cart-link">ðŸ›’ Cart (<span id="cart-count">0</span>)</a></li>
    </ul>
  </nav>
</header>

<section id="item-details">
  <h1 id="item-name"></h1>
  <p class="price" id="item-price"></p>
  <div class="image-gallery">
    <img id="main-image" src="" alt="Main product image" />
    <div class="thumbnail-images" id="thumbnails"></div>
  </div>
  <p class="description" id="item-description"></p>
  <button class="add-to-cart" id="add-to-cart-btn">Add to Cart</button>
</section>

<footer>
  <p>&copy; 2025 Techora. All rights reserved.</p>
</footer>

<a href="cart.html" id="floating-cart">ðŸ›’ (<span id="floating-count">0</span>)</a>

<script>
  // Define the products with multiple images each
  const items = [
    {
      id: 1,
      name: 'Gaming Laptop',
      price: 1199,
      description: 'High-performance gaming laptop with latest GPU.',
      images: ['gaming-laptop1.jpg', 'gaming-laptop2.jpg', 'gaming-laptop3.jpg']
    },
    {
      id: 2,
      name: 'Desktop PC',
      price: 999,
      description: 'Powerful desktop for work and play.',
      images: ['desktop1.jpg', 'desktop2.jpg', 'desktop3.jpg']
    },
    {
      id: 3,
      name: 'Mechanical Keyboard',
      price: 89,
      description: 'Tactile and responsive mechanical keyboard.',
      images: ['keyboard1.jpg', 'keyboard2.jpg', 'keyboard3.jpg']
    },
    {
      id: 4,
      name: '4K Monitor',
      price: 349,
      description: 'Crystal clear 4K resolution monitor.',
      images: ['monitor1.jpg', 'monitor2.jpg', 'monitor3.jpg']
    },
    {
      id: 5,
      name: 'Gaming Mouse',
      price: 49,
      description: 'Ergonomic mouse with customizable DPI.',
      images: ['mouse1.jpg', 'mouse2.jpg', 'mouse3.jpg']
    },
    {
      id: 6,
      name: '1TB SSD',
      price: 129,
      description: 'Fast 1TB solid-state drive.',
      images: ['ssd1.jpg', 'ssd2.jpg', 'ssd3.jpg']
    }
  ];

  // Get product ID from URL ?id=1 etc.
  const urlParams = new URLSearchParams(window.location.search);
  const itemId = parseInt(urlParams.get('id'), 10);

  // DOM elements
  const itemNameEl = document.getElementById('item-name');
  const itemPriceEl = document.getElementById('item-price');
  const itemDescEl = document.getElementById('item-description');
  const mainImageEl = document.getElementById('main-image');
  const thumbnailsEl = document.getElementById('thumbnails');
  const addToCartBtn = document.getElementById('add-to-cart-btn');
  const cartCountSpan = document.getElementById('cart-count');
  const floatingCountSpan = document.getElementById('floating-count');
  const userArea = document.getElementById('user-area');

  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCountSpan.textContent = totalCount;
    floatingCountSpan.textContent = totalCount;
  }

  function updateUserArea() {
    const username = localStorage.getItem("username");
    if (username) {
      userArea.innerHTML = `<span style="color:#00bcd4;">ðŸ‘¤ ${username}</span> | <a href="#" onclick="logout()">Logout</a>`;
    } else {
      userArea.innerHTML = '<a href="login.html">Login</a>';
    }
  }

  function logout() {
    localStorage.removeItem("username");
    window.location.reload();
  }

  // Change main image to clicked thumbnail
  function changeMainImage(src) {
    mainImageEl.src = src;
  }

  // Add item to cart in localStorage
  function addToCart(item) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const foundIndex = cart.findIndex(ci => ci.id === item.id);
    if (foundIndex >= 0) {
      cart[foundIndex].quantity += 1;
    } else {
      cart.push({ id: item.id, name: item.name, price: item.price, quantity: 1, image: item.images[0] });
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    alert(`Added "${item.name}" to cart.`);
  }

  window.addEventListener('load', () => {
    updateCartCount();
    updateUserArea();

    if (!itemId) {
      alert('No product selected!');
      window.location.href = 'items.html';
      return;
    }

    const item = items.find(i => i.id === itemId);
    if (!item) {
      alert('Product not found!');
      window.location.href = 'items.html';
      return;
    }

    // Populate page with item details
    itemNameEl.textContent = item.name;
    itemPriceEl.textContent = `$${item.price.toFixed(2)}`;
    itemDescEl.textContent = item.description;
    mainImageEl.src = item.images[0];
    mainImageEl.alt = item.name;

    // Clear thumbnails container
    thumbnailsEl.innerHTML = '';
    item.images.forEach(src => {
      const img = document.createElement('img');
      img.src = src;
      img.alt = item.name + ' image';
      img.onclick = () => changeMainImage(src);
      thumbnailsEl.appendChild(img);
    });

    addToCartBtn.onclick = () => addToCart(item);
  });
</script>
</body>
</html>
